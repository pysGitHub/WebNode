<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>String 类型</title>
</head>

<body>

</body>
<script>
    /*
    String 对象用于处理文本（字符串）。

    转义字符:
    Code	Output
    \0	空字符
    \'	单引号
    \"	双引号
    \\	反斜杠
    \n	换行
    \r	回车
    \v	垂直制表符
    \t	水平制表符
    \b	退格
    \f	换页
    \uXXXX	unicode 码
    \u{X} ... \u{XXXXXX}	unicode codepoint 
    \xXX	Latin-1 字符(x小写)
    */



    // 常用方法:

    // 返回字符串指定的字符
    /*
    charAt() 从一个字符串str 中返回指定的字符;
    语法：
         str.charAt(index)   index的范围: [0, str.length-1]; 
         如果 index 不写,则默认为0，即：str.chartAt() <===> str.chartAt(0)
    */
    const str_chartAt = 'asdasda';
    console.log(str_chartAt.charAt(1)); // s



    // 字符串拼接
    /*
    concat() 将一个或多个字符串与原字符串进行拼接, 并返回新的字符串。(注意:concat() 方法不会改变原字符串)
    语法：
    str.concat(str, [, ...strN]) 
    */
    const str_concat = 'hellow';
    const str_concat1 = ' world';
    const str_concat2 = ' !';
    console.log(str_concat.concat(str_concat1, str_concat2)); // hellow world !
    console.log(str_concat.concat(...[str_concat1, str_concat2])); // hellow world !


    // 检测当前字符串是否以给定的字符串结尾
    /*
    endsWith() 检测当前字符串str 是否以给定的字符串searchStr 结尾, 返回true 或者 false.
    语法：
    str.endsWith(searchStr[, length])
    searchStr: 要被查找的字符串;
    length: 可选, 被检测的字符串str 的长度, 默认为 str.length
        str.endsWith(searchStr, length) 表示从字符串str截取长度为length的字符串,
        并判断其是否以 searchStr 结尾
    */
    const str_endsWith = "To be, or not to be, that is the question.";
    console.log(str_endsWith.endsWith('question')); // false 因为被检测的字符串str_endsWith结尾最后一个字符为 '.'
    console.log(str_endsWith.endsWith('question.')); // true 
    console.log(str_endsWith.endsWith('to be,', 20)); // true 



    /*
    startsWith() 方法用来判断当前字符串是否以另外一个给定的子字符串开头，
        并根据判断结果返回 true 或 false。
    语法：
    str.startsWith(searchStr[, position])
    searchStr: 要被查找的字符串;
    position: 可选, 在 str 中搜索 searchStr 的开始位置，默认值为 0。
    */
    const str_startsWith = "To be, or not to be, that is the question.";
    console.log(str_startsWith.startsWith('question')); // false
    console.log(str_startsWith.startsWith('To be')); // true 
    console.log(str_startsWith.startsWith('to be,', 9)); // false  从index=9 开始位 not to be....



    // 判断一个字符串是否包含另一个字符串
    /*
    includes() 判断一个字符串str 是否包含另一个字符串searchStr, 返回 true 或者 false.
    语法：
    str.includes(searchStr[, position])
    searchStr: 要被查找的字符串;
    position: 可选, 从被检测字符串str 的哪个索引位置开始搜索, 默认为 0;
    注意： includes() 方法区分大小写
    */
    const str_includes = 'qwqqweqett';
    console.log(str_includes.includes('qwe', 2)); // true
    console.log(str_includes.includes('QAwe', 2)); // false  原因：includes() 方法区分大小写


    /*
    indexOf() 检测字符串str 中是否包含另一个字符串searchStr,并返回str第一次出现searchStr的索引; 
    找不到则返回 -1.(indexOf() 区分大小写)
    语法：
    str.indexOf(searchStr[, fromIndex])
    searchStr: 要被查找的字符串; 如果没有则会被强制设置为 `undefined`;
    fromIndex: 可选, 开始查找的位置, 默认为 0;
        如果 fromIndex <= 0, 那么查找分别从 str的起始位置 0 开始查找;
        如果 fromIndex >= str.length, 那么查找结果直接返回 -1;

    */
    const str_indexOf = '12345abcde';
    console.log(str_indexOf.indexOf('5a', -1)); // 4
    /*
     如果searchStr是空字符串 "",则：
     如果查找位置fromIndex < 检测字符串str的长度, 返回值为 fromIndex;
     如果查找位置fromIndex >= 检测字符串str的长度, 返回值为 str.length;
    */
    console.log(str_indexOf.indexOf('')); // 0
    console.log(str_indexOf.indexOf('', -1)); // 0
    console.log(str_indexOf.indexOf('', 8)); // 8
    console.log(str_indexOf.indexOf('', 10)); // 10
    console.log(str_indexOf.indexOf('', 20)); // 10

    // 使用 indexOf 统计一个字符串中某个字母出现的次数
    // 在下例中，设置了 count 来记录字母 e 在字符串 str 中出现的次数：
    var str = 'To be, or not to be, that is the question.';
    var count = 0;
    var pos = str.indexOf('e');

    while (pos !== -1) {
        count++;
        pos = str.indexOf('e', pos + 1);
    }
    console.log(count); //  4


    /*
    lastIndexOf() 从字符串str的结尾到头查找是否包含字符串searchStr,
    找到则返回 searchValue 的第一个字符在 str 中的位置。str中的字符位置是从 0 开始的。
    注意： includes() 方法区分大小写
    语法：
    str.lastIndexOf(searchStr[, fromIndex])
    searchStr: 要被查找的字符串;如果searchValue是空字符串，则返回fromIndex;
    fromIndex: 待匹配字符串searchValue的开头一位字符从 str的第fromIndex位开始向左回向查找。
        fromIndex默认值是 +Infinity。如果 fromIndex >= str.length ，则会搜索整个字符串。
        如果 fromIndex < 0 ，则等同于 fromIndex == 0。
    
    indexOf() 和 lastIndexOf() 的区别：
    indexOf() 从字符串str起始位置查找指定字符串searchStr,找到就返回searchValue 的第一个字符在 str 中的位置;
    lastIndexOf 从字符串str的结尾查找指定字符串searchStr,找到就返回searchValue 的第一个字符在 str 中的位置;
    例如：
    str = '1ab1234ab1', searchStr = 'ab';
    str.indexOf(searchStr) 返回的是从str开始位置到结尾位置第一次遇到searchStr的index,所以返回结果为：1;
    str.lastIndexOf(searchStr) 返回的是从str结尾位置到开始位置第一次遇到searchStr的index,所以返回结果为：7;
    */



    /*
    repeat() 重复拼接字符串 str指定的次数,并返回重复拼接的字符串.
    语法：
    str.repeat(count)
    count: 0<= count < +Infinity; 当count为浮点数则会进行直接取整数位重复拼接。
    */
    console.log('abc'.repeat()); // 空字符串 ''
    console.log('abc'.repeat(1)); // 空字符串 'abc'
    console.log('abc'.repeat(3.8)); // 空字符串 'abcabcabc'


    /*
    replace(要被替换的内容, 新的内容) 方法返回一个由替换值（replacement）替换部分或所有的模式（pattern）匹配项后的新字符串。
    (如果pattern是字符串，则仅替换第一个匹配项。)
    语法：
    str.replace(regexp|substr, newSubStr|function)
    
    regexp (pattern)
    一个RegExp 对象或者其字面量。该正则所匹配的内容会被第二个参数的返回值替换掉。
    substr (pattern)
    一个将被 newSubStr 替换的 字符串。其被视为一整个字符串，而不是一个正则表达式。仅第一个匹配项会被替换。
    
    newSubStr (replacement)
    用于替换掉第一个参数在原字符串中的匹配部分的字符串。该字符串中可以内插一些特殊的变量名。
    function (replacement)
    一个用来创建新子字符串的函数，该函数的返回值将替换掉第一个参数匹配到的结果。
    */

    console.log('字符串替换abcabc'.replace('abc', '--'));
    console.log('字符串替换abcabc'.replaceAll('abc', '--'));

    // 在 replace() 中使用正则表达式
    var str = 'Twas the night before Xmas...';
    var newstr = str.replace(/xmas/i, 'Christmas');
    console.log(newstr);  // Twas the night before Christmas...

    var re = /apples/gi;
    var str = "Apples are round, and apples are juicy.";
    var newstr = str.replace(re, "oranges");
    // oranges are round, and oranges are juicy.
    console.log(newstr);




    /*
    replaceAll() 方法返回一个新字符串，新字符串所有满足 pattern 的部分都已被replacement 替换。
    pattern可以是一个字符串或一个 RegExp， replacement可以是一个字符串或一个在每次匹配被调用的函数。
    
    语法：
    const newStr = str.replaceAll(regexp|substr, newSubstr|function)
    
    当使用一个 `regex`时，您必须设置全局（“ g”）标志，
    否则，它将引发 TypeError：“必须使用全局 RegExp 调用 replaceAll”。
    */
    'aabbcc'.replaceAll('b', '.'); // 'aa..cc'


    /*
    slice() 返回一个从原字符串str中提取出来的新字符串, 且不会改动原字符串。
    语法：
    str.slice(beginIndex[, endIndex])
    beginIndex: 字符串截取的起始位置, 如果值为负数，会被当做 str.length + beginIndex 看待;
        （例如， 如果 beginIndex 是 -3 则看作是：str.length - 3）
    endIndex: 可选, 字符串截取的结束位置, 如果省略该参数，slice() 会一直提取到字符串末尾。
        如果该参数为负数，则被看作是 str.length + endIndex
        （例如， 如果 endIndex 是 -3 则看作是：str.length - 3）
    */
    const str_slice = 'The morning is upon us.' // str_slice.length = 21
    console.log(str_slice.slice(4, 10)); // morning
    console.log(str_slice.slice(4, -2)); // morning is upon u
    console.log(str_slice.slice(4)); // morning is upon us.


    /*
    substring() 方法返回一个字符串在开始索引到结束索引之间的一个子集, 或从开始索引直到字符串的末尾的一个子集。
    语法：
    str.substring(indexStart[, indexEnd])
    indexStart： 需要截取的第一个字符的索引，该索引位置的字符作为返回的字符串的首字母。
    indexEnd：可选。一个 0 到字符串长度之间的整数，注意:以该数字为索引的字符不包含在截取的字符串内。
    
    substring 提取从 indexStart 到 indexEnd（不包括）之间的字符。特别地：
    如果 indexStart 等于 indexEnd，substring 返回一个空字符串。
    如果省略 indexEnd，substring 提取字符一直到字符串末尾。
    如果任一参数小于 0 或为 NaN，则被当作 0。
    如果任一参数大于 stringName.length，则被当作 stringName.length。
    如果 indexStart 大于 indexEnd，则 substring 的执行效果就像两个参数调换了一样, 
        即：str.substring(indexStart,indexEnd) = str.substring(indexEnd, indexStart)
    */
    var anyString = "Mozilla";

    // 输出 "Moz"
    console.log(anyString.substring(0, 3));
    console.log(anyString.substring(3, 0));
    console.log(anyString.substring(3, -3));
    console.log(anyString.substring(3, NaN));
    console.log(anyString.substring(-2, 3));
    console.log(anyString.substring(NaN, 3));

    // 输出 "lla"
    console.log(anyString.substring(4, 7));
    console.log(anyString.substring(7, 4));

    // 输出 ""
    console.log(anyString.substring(4, 4));

    // 输出 "Mozill"
    console.log(anyString.substring(0, 6));

    // 输出 "Mozilla"
    console.log(anyString.substring(0, 7));
    console.log(anyString.substring(0, 10));



    /*
    split() 方法用于把一个字符串分割成字符串数组。
    语法:
    str.split([separator[, limit]])
    separator: 字符串或正则表达式，从该参数指定的地方分割 str;
    limit: 可选, 该参数可指定返回的数组的最大长度。如果设置了该参数，返回的子串不会多于这个参数指定的数组。
    */
    "hello".split("")	// ["h", "e", "l", "l", "o"]
    "hello".split("", 3)	// ["h", "e", "l"]




    // 将字符串转为大小写
    /*
    toLocalLowerCase() 将字符串转为小写
    语法：
    str.toLocaleLowerCase()
    
    toLocaleUpperCase() 将字符串转为大写
    语法：
    str.toLocaleUpperCase()
    
    
    toLowerCase() 会将调用该方法的字符串值转为小写形式，并返回。
    语法：
    str.toLowerCase()
    
    toUpperCase() 方法将调用该方法的字符串转为大写形式并返回（如果调用该方法的值不是字符串类型会被强制转换）。
    语法：
    str.toUpperCase()
    */
    const str_upper = 'APPLE WATCH';
    const str_lowwer = 'apple watch';

    console.log(str_upper.toLocaleLowerCase());
    console.log(str_upper.toLowerCase());
    console.log('原字符串: ', str_upper);

    console.log(str_lowwer.toLocaleUpperCase());
    console.log(str_lowwer.toLowerCase());
    console.log('原字符串: ', str_lowwer);


    // 删除字符串空白
    /*
    trim() 去除字符串str的两端空白字符。
    语法：
    str.trim()

    trimEnd() 去除字符串str的结尾空白字符。
    语法：
    str.trimEnd()

    trimStart() 去除字符串str的开头空白字符。
    语法：
    str.trimStart()
    */
    const blankStr = ' 去除字符串的空格 ';
    console.log(blankStr.trim(), blankStr.trim().length);
    console.log(blankStr.trimStart(), blankStr.trimStart().length);
    console.log(blankStr.trimEnd(), blankStr.trimEnd().length);
    console.log(blankStr, blankStr.length);


    // String 类型转其他类型数据
    /*
    String -> Array
    str.split()
    */
    const string0 = 'abcdefg';
    const string1 = 'abc,def,g';
    console.log(string0.split('')); // ['a', 'b', 'c', 'd', 'e', 'f', 'g']
    console.log(string1.split(',')); // ['abc', 'def', 'g']

    /*
    Array-> String
    array.toString();
    array.join()
    */
   const array0 = ['abc','123'];
   console.log(array0.toString()); // abc,123
   console.log(array0.join('')); // abc123
   console.log(array0);


   /*
   String -> Number
   parseInt(str) / parseFloat(str) 
   Number(str)
   区别：
   parseInt()、parseFloat() 转换第一个无效字符之前的字符串，例如parseInt(1.2.3)为1，parseFloat(1.2.3)为1.2；
   Number()如果是不能转换的字符串则输出NaN，例如Number(1.2.3)为NaN，如果字符串能被转换成number类型，则Number()函数将判断调用parseInt()还是parseFloat()函数转换。
   */
    const stri0 = '123.45abc';
    console.log(parseInt(stri0)); // 123
    console.log(parseFloat(stri0)); // 123.45
    console.log(Number(stri0)); // NaN  不符合数字的写法, 不能转换成字符串

    /*
    Number -> String
    number.toString()
    */


    /*
    Json String -> Json数据
    JSON.parse(jsonStr) 
    */
   const jsonString = '{"key":"value"}';
   console.log(JSON.parse(jsonString)); // {'key':'value'}

   
   /*
   Json数据 -> Json String
   JSON.stringify(jsonData)
   */
  const jsonData = {'key':'value'};
  console.log(JSON.stringify(jsonData)); // '{"key":"value"}'


  /*
  Array -> JSON
  */

</script>

</html>